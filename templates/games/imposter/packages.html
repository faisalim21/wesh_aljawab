<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø²Ù… Ù„Ø¹Ø¨Ø© Ø§Ù…Ø¨ÙˆØ³ØªØ± - ÙˆØ´ Ø§Ù„Ø¬ÙˆØ§Ø¨</title>

    <!-- Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ CSS Ø¬Ø§Ù‡Ø² ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ØªÙ‚Ø¯Ø± ØªØ´ÙŠÙ„ Ù‡Ø°ÙŠ ÙˆØªØ­Ø· {% load static %} ÙˆÙ…Ù„ÙØ§ØªÙƒ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            background: #0f172a;
            font-family: 'Tajawal', sans-serif;
            color: #e5e7eb;
            padding-bottom: 80px;
        }

        .imposter-hero {
            background: radial-gradient(circle at top left, #22c55e 0%, #16a34a 10%, #0f172a 40%, #020617 100%);
            padding: 110px 0 80px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            box-shadow: 0 14px 40px rgba(0,0,0,0.5);
        }
        .imposter-hero h1 {
            font-size: 3rem;
            font-weight: 900;
            letter-spacing: -1px;
        }
        .imposter-hero p {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-top: 10px;
        }

        .imp-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .imp-card {
            position: relative;
            background: linear-gradient(145deg, #020617, #0b1120);
            border-radius: 24px;
            padding: 26px 24px 24px;
            border: 1px solid #1e293b;
            box-shadow: 0 16px 40px rgba(15,23,42,0.8);
            transition: all .25s ease;
        }
        .imp-card:hover {
            transform: translateY(-6px);
            border-color: #4f46e5;
            box-shadow: 0 20px 55px rgba(15,23,42,1);
        }

        .badge-free {
            position: absolute;
            top: 14px;
            right: 16px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            padding: 5px 12px;
            border-radius: 999px;
            font-size: .8rem;
            font-weight: 800;
            color: #ecfdf5;
        }
        .badge-paid {
            position: absolute;
            top: 14px;
            right: 16px;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            padding: 5px 12px;
            border-radius: 999px;
            font-size: .8rem;
            font-weight: 800;
            color: #eef2ff;
        }

        .pkg-title {
            font-size: 1.7rem;
            font-weight: 800;
            color: #e5e7eb;
            margin-bottom: 6px;
        }
        .pkg-sub {
            font-size: .95rem;
            color: #9ca3af;
            margin-bottom: 16px;
        }

        .pkg-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 18px;
            font-size: .9rem;
            color: #cbd5f5;
        }
        .pkg-meta span {
            background: #020617;
            border-radius: 999px;
            padding: 4px 10px;
            border: 1px solid #1f2937;
        }

        .price-box {
            margin: 14px 0 18px;
            font-size: 1.05rem;
            font-weight: 700;
            color: #e5e7eb;
        }
        .price-old {
            text-decoration: line-through;
            color: #6b7280;
            margin-left: 8px;
            font-weight: 500;
        }
        .price-new {
            color: #22c55e;
            font-weight: 900;
            font-size: 1.3rem;
        }
        .price-free {
            color: #22c55e;
            font-weight: 900;
            font-size: 1.2rem;
        }

        .imp-btn {
            width: 100%;
            padding: 12px 14px;
            border-radius: 14px;
            border: none;
            font-size: 1.05rem;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            color: white;
            box-shadow: 0 10px 28px rgba(99,102,241,0.45);
            transition: 0.2s ease;
        }
        .imp-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(129,140,248,0.7);
        }

        .imp-btn.imp-free {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 10px 26px rgba(34,197,94,0.45);
        }
        .imp-btn.imp-free:hover {
            box-shadow: 0 12px 34px rgba(34,197,94,0.7);
        }

        @media (max-width: 768px) {
            .imposter-hero {
                padding: 90px 0 60px;
            }
            .imposter-hero h1 {
                font-size: 2.3rem;
            }
        }
    </style>
</head>

<body>
{% include "header.html" %}

<section class="imposter-hero">
    <div class="container">
        <h1>ğŸ­ Ø­Ø²Ù… Ù„Ø¹Ø¨Ø© Ø§Ù…Ø¨ÙˆØ³ØªØ±</h1>
        <p>Ø§Ø®ØªØ± Ø§Ù„Ø­Ø²Ù…Ø© ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù„ÙŠ ÙŠÙ†Ø§Ø³Ø¨ÙƒÙ…ØŒ ÙˆÙƒÙ„ Ø¬ÙˆÙ„Ø© ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ…Ø­Ø§ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„ÙƒØ´Ù Ø§Ù„Ø§Ù…Ø¨ÙˆØ³ØªØ±.</p>
    </div>
</section>

<div class="container">
    <div class="imp-grid mt-4">

        {# Ù†Ù„Ù Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù„ÙŠ Ø¬Ø§ÙŠÙŠÙ† Ù…Ù† Ø§Ù„Ø§Ø¯Ù…Ù† #}
        {% for pkg in packages %}
            <div class="imp-card">

                {# Ø´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ© / Ù…Ø¯ÙÙˆØ¹Ø© #}
                {% if pkg.is_free or pkg.package_number == 0 %}
                    <span class="badge-free">Ù…Ø¬Ø§Ù†ÙŠØ©</span>
                {% else %}
                    <span class="badge-paid">Ù…Ø¯ÙÙˆØ¹Ø©</span>
                {% endif %}

                <div class="pkg-title">
                    {% if pkg.is_free or pkg.package_number == 0 %}
                        Ø§Ù„Ø­Ø²Ù…Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    {% else %}
                        Ø­Ø²Ù…Ø© Ø±Ù‚Ù… {{ pkg.package_number }}
                    {% endif %}
                </div>

                <div class="pkg-sub">
                    {% if pkg.description %}
                        {{ pkg.description }}
                    {% else %}
                        Ø¬ÙˆÙ„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ø¨ÙƒÙ„Ù…Ø§Øª Ø³Ø±Ù‘ÙŠØ© Ù…Ø®ØªÙ„ÙØ©ØŒ Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø¶Ø­Ùƒ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªØ®Ù…ÙŠÙ† Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡.
                    {% endif %}
                </div>

                <div class="pkg-meta">
                    {# Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª (Ø¬ÙˆÙ„Ø§Øª): ÙŠÙØ¶Ù‘Ù„ ÙŠÙƒÙˆÙ† Annotate word_count Ù…Ù† Ø§Ù„Ù€ view #}
                    {% if pkg.word_count %}
                        <span><i class="fa-regular fa-circle-play ms-1"></i>{{ pkg.word_count }} Ø¬ÙˆÙ„Ø© / ÙƒÙ„Ù…Ø©</span>
                    {% else %}
                        {# fallback Ù„Ùˆ Ù…Ø§ ÙÙŠÙ‡ annotation #}
                        <span><i class="fa-regular fa-circle-play ms-1"></i>{{ pkg.imposter_words.all|length }} Ø¬ÙˆÙ„Ø© / ÙƒÙ„Ù…Ø©</span>
                    {% endif %}

                    {% if pkg.is_free or pkg.package_number == 0 %}
                        <span>ØªØ¬Ø±Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</span>
                    {% else %}
                        <span>ØµØ§Ù„Ø­ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ù„Ø§Ù„ Ù§Ù¢ Ø³Ø§Ø¹Ø© Ù…Ù† Ø§Ù„Ø´Ø±Ø§Ø¡</span>
                    {% endif %}
                </div>

                <div class="price-box">
                    {% if pkg.is_free or pkg.effective_price == 0 %}
                        <span class="price-free">0.00 Ø±ÙŠØ§Ù„</span>
                    {% else %}
                        {% if pkg.has_discount %}
                            <span class="price-old">{{ pkg.original_price }} Ø±ÙŠØ§Ù„</span>
                            <span class="price-new">{{ pkg.discounted_price }} Ø±ÙŠØ§Ù„</span>
                        {% else %}
                            <span class="price-new">{{ pkg.price }} Ø±ÙŠØ§Ù„</span>
                        {% endif %}
                    {% endif %}
                </div>

                {# Ø²Ø± Ø¨Ø¯Ø¡ / Ø´Ø±Ø§Ø¡ #}
                {% if pkg.is_free or pkg.package_number == 0 %}
                    <a href="{% url 'games:imposter_setup' pkg.id %}" class="imp-btn imp-free">
                        <i class="fa-solid fa-bolt"></i>
                        Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ù‹Ø§
                    </a>

                {% else %}
                    <form method="post" action="{% url 'games:imposter_start' pkg.id %}">
                        {% csrf_token %}
                        <button type="submit" class="imp-btn">
                            <i class="fa-solid fa-cart-shopping"></i>
                            Ø´Ø±Ø§Ø¡ ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨
                        </button>
                    </form>

                {% endif %}

            </div>
        {% empty %}
            <p class="text-center text-muted mt-5">
                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø²Ù… Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§ Ù„Ù„Ø¹Ø¨Ø© Ø§Ù…Ø¨ÙˆØ³ØªØ±. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø²Ù… ÙˆØªÙØ¹ÙŠÙ„Ù‡Ø§ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….
            </p>
        {% endfor %}

    </div>
</div>
{% include "footer.html" %}

</body>
</html>

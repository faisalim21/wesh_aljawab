<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø­Ø²Ù… Ù„Ø¹Ø¨Ø© Ø§Ù…Ø¨ÙˆØ³ØªØ± - ÙˆØ´ Ø§Ù„Ø¬ÙˆØ§Ø¨</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b1020;
      --card:#0f172a;
      --border:#1e293b;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --grad:linear-gradient(135deg,#6366f1,#8b5cf6,#06b6d4);
      --success:#22c55e;
      --paid:linear-gradient(135deg,#8b5cf6,#6366f1);
    }

    body{
      background:radial-gradient(circle at top,#111827,#020617 70%);
      font-family:'Tajawal',sans-serif;
      color:var(--text);
    }

    /* ===== Hero ===== */
    .hero{
      padding:120px 0 90px;
      text-align:center;
      background:
        radial-gradient(circle at top right,rgba(99,102,241,.25),transparent 40%),
        radial-gradient(circle at top left,rgba(34,197,94,.18),transparent 45%);
      border-bottom:1px solid var(--border);
    }

    .hero h1{
      font-size:3rem;
      font-weight:900;
      margin-bottom:10px;
    }

    .hero p{
      color:var(--muted);
      font-size:1.1rem;
      max-width:620px;
      margin:auto;
    }

    /* ===== Grid ===== */
    .packages-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
      gap:28px;
      margin-top:-40px;
      padding-bottom:80px;
    }

    /* ===== Card ===== */
    .pkg-card{
      background:linear-gradient(160deg,#020617,#0b1120);
      border:1px solid var(--border);
      border-radius:26px;
      padding:26px;
      box-shadow:0 20px 50px rgba(0,0,0,.45);
      transition:.25s ease;
      position:relative;
    }

    .pkg-card:hover{
      transform:translateY(-6px);
      border-color:#6366f1;
      box-shadow:0 25px 70px rgba(0,0,0,.7);
    }

    .pkg-badge{
      position:absolute;
      top:18px;
      right:18px;
      padding:6px 14px;
      font-size:.8rem;
      font-weight:900;
      border-radius:999px;
    }

    .free{
      background:linear-gradient(135deg,#22c55e,#16a34a);
      color:#ecfdf5;
    }

    .paid{
      background:var(--paid);
      color:#eef2ff;
    }

    .pkg-title{
      font-size:1.6rem;
      font-weight:900;
      margin-bottom:6px;
    }

    .pkg-desc{
      font-size:.95rem;
      color:var(--muted);
      margin-bottom:18px;
    }

    .pkg-meta{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:18px;
    }

    .pkg-meta span{
      font-size:.85rem;
      padding:5px 12px;
      background:#020617;
      border:1px solid var(--border);
      border-radius:999px;
      color:#c7d2fe;
    }

    .price{
      margin:18px 0;
      font-weight:900;
    }

    .price-old{
      text-decoration:line-through;
      color:#64748b;
      margin-left:8px;
      font-weight:600;
    }

    .price-new{
      font-size:1.35rem;
      color:var(--success);
    }

    /* ===== Button ===== */
    .btn-main{
      width:100%;
      padding:14px;
      border-radius:16px;
      border:none;
      font-size:1.05rem;
      font-weight:900;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      background:var(--paid);
      color:#fff;
      box-shadow:0 14px 32px rgba(99,102,241,.4);
      transition:.25s ease;
    }

    .btn-main:hover{
      transform:translateY(-2px);
      box-shadow:0 18px 40px rgba(129,140,248,.6);
    }

    .btn-free{
      background:linear-gradient(135deg,#22c55e,#16a34a);
      box-shadow:0 14px 32px rgba(34,197,94,.4);
    }

    .btn-free:hover{
      box-shadow:0 18px 40px rgba(34,197,94,.6);
    }

    @media(max-width:768px){
      .hero h1{font-size:2.3rem}
    }
  </style>
</head>

<body>
{% include "header.html" %}

<section class="hero">
  <div class="container">
    <h1>ğŸ­ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ±</h1>
    <p>
      Ø§Ø®ØªØ± Ø§Ù„Ø­Ø²Ù…Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ÙƒÙ…ØŒ ÙƒÙ„ Ø¬ÙˆÙ„Ø© Ø¨ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ¬Ø±Ø¨Ø© Ù…Ø®ØªÙ„ÙØ©
      Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¥Ù…Ø¨ÙˆØ³ØªØ± Ø¨ÙŠÙ†ÙƒÙ….
    </p>
  </div>
</section>

<div class="container">
  <div class="packages-grid">

    {% for pkg in packages %}
      <div class="pkg-card">

        {% if pkg.is_free or pkg.package_number == 0 %}
          <span class="pkg-badge free">Ù…Ø¬Ø§Ù†ÙŠØ©</span>
        {% else %}
          <span class="pkg-badge paid">Ù…Ø¯ÙÙˆØ¹Ø©</span>
        {% endif %}

        <div class="pkg-title">
          {% if pkg.is_free or pkg.package_number == 0 %}
            Ø§Ù„Ø­Ø²Ù…Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
          {% else %}
            Ø­Ø²Ù…Ø© Ø±Ù‚Ù… {{ pkg.package_number }}
          {% endif %}
        </div>

        <div class="pkg-desc">
          {{ pkg.description|default:"Ø¬ÙˆÙ„Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø© Ø¨ÙƒÙ„Ù…Ø§Øª Ø³Ø±Ù‘ÙŠØ© Ù…Ø®ØªÙ„ÙØ©ØŒ Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„ØªØ­Ø¯ÙŠ ÙˆØ§Ù„Ø¶Ø­Ùƒ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡." }}
        </div>

        <div class="pkg-meta">
          {% if pkg.word_count %}
            <span><i class="fa-solid fa-rotate ms-1"></i>{{ pkg.word_count }} Ø¬ÙˆÙ„Ø©</span>
          {% else %}
            <span><i class="fa-solid fa-rotate ms-1"></i>{{ pkg.imposter_words.all|length }} Ø¬ÙˆÙ„Ø©</span>
          {% endif %}

          {% if not pkg.is_free %}
          {% endif %}
        </div>

        <div class="price">
          {% if pkg.is_free or pkg.effective_price == 0 %}
            <span class="price-new">0 Ø±ÙŠØ§Ù„</span>
          {% else %}
            {% if pkg.has_discount %}
              <span class="price-old">{{ pkg.original_price }} Ø±ÙŠØ§Ù„</span>
              <span class="price-new">{{ pkg.discounted_price }} Ø±ÙŠØ§Ù„</span>
            {% else %}
              <span class="price-new">{{ pkg.price }} Ø±ÙŠØ§Ù„</span>
            {% endif %}
          {% endif %}
        </div>

        {% if pkg.is_free or pkg.package_number == 0 %}
          <a href="{% url 'games:imposter_setup' pkg.id %}" class="btn-main btn-free">
            <i class="fa-solid fa-bolt"></i> Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¢Ù†
          </a>
        {% else %}
          {% if pkg.id in purchased_packages %}
            <a href="{% url 'games:imposter_setup' pkg.id %}" class="btn-main btn-free">
              <i class="fa-solid fa-play"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨
            </a>
          {% else %}
            <a href="{% url 'payments:start_payment' pkg.id %}" class="btn-main">
              <i class="fa-solid fa-cart-shopping"></i> Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø²Ù…Ø©
            </a>
          {% endif %}
        {% endif %}

      </div>
    {% empty %}
      <p class="text-center text-muted mt-5">
        Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø²Ù… Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§.
      </p>
    {% endfor %}

  </div>
</div>

{% include "footer.html" %}
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>اختبار إعدادات الراجحي</title>
  <style>
    body {
      font-family: Tahoma, Arial, sans-serif;
      background: #f7f7f7;
      padding: 2rem;
    }
    .card {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      color: #333;
    }
    .ok { color: green; font-weight: bold; }
    .fail { color: red; font-weight: bold; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    td, th {
      padding: 8px;
      border: 1px solid #ddd;
      text-align: right;
    }
    th {
      background: #eee;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>اختبار إعدادات الراجحي</h1>

    <p>الحالة:
      {% if ok %}
        <span class="ok">✔ الإعدادات كاملة وصحيحة</span>
      {% else %}
        <span class="fail">✘ هناك مشكلة في الإعدادات</span>
      {% endif %}
    </p>

    <h2>القيم المقروءة</h2>
    <table>
      <tr><th>المفتاح</th><th>القيمة</th></tr>
      <tr><td>MERCHANT_ID</td><td>{{ config_preview.MERCHANT_ID }}</td></tr>
      <tr><td>TERMINAL_ID</td><td>{{ config_preview.TERMINAL_ID }}</td></tr>
      <tr><td>TRANSPORTAL_ID</td><td>{{ config_preview.TRANSPORTAL_ID }}</td></tr>
      <tr><td>كلمة المرور مضبوطة؟</td><td>{{ config_preview.TRANSPORTAL_PASSWORD_SET }}</td></tr>
      <tr><td>RESOURCE_FILE</td><td>{{ config_preview.RESOURCE_FILE }}</td></tr>
      <tr><td>الملف موجود؟</td><td>{{ config_preview.RESOURCE_FILE_EXISTS }}</td></tr>
      <tr><td>المفتاح (RESOURCE_KEY) مضبوط؟</td><td>{{ config_preview.RESOURCE_KEY_SET }}</td></tr>
    </table>

    {% if missing_keys %}
      <h2>المفاتيح المفقودة</h2>
      <ul>
        {% for k in missing_keys %}
          <li>{{ k }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
</body>
</html>

# games/management/commands/load_questions.py
from django.core.management.base import BaseCommand
from games.models import GamePackage, LettersGameQuestion

class Command(BaseCommand):
    help = 'ุฅุฏุฎุงู ุฃุณุฆูุฉ ูุนุจุฉ ุฎููุฉ ุงูุญุฑูู'

    def handle(self, *args, **options):
        # ุฅูุดุงุก ุฃู ุฌูุจ ุงูุญุฒูุฉ ุงููุฌุงููุฉ
        free_package, created = GamePackage.objects.get_or_create(
            game_type='letters',
            package_number=1,
            defaults={
                'is_free': True,
                'price': 0.00,
                'is_active': True
            }
        )
        
        if created:
            self.stdout.write(
                self.style.SUCCESS('ุชู ุฅูุดุงุก ุงูุญุฒูุฉ ุงููุฌุงููุฉ')
            )
        else:
            self.stdout.write(
                self.style.WARNING('ุงูุญุฒูุฉ ุงููุฌุงููุฉ ููุฌูุฏุฉุ ุณูุชู ุชุญุฏูุซ ุงูุฃุณุฆูุฉ')
            )

        # ุงูุฃุณุฆูุฉ - ุฃุณุฆูุชู ุงูุญููููุฉ
        ุงุณุฆูุฉ = {
            "ุฃ": {
                "ุฑุฆูุณู": ("ูุง ุงุณู ุฏููุฉ ุฃูุฑูุจูุฉ ุนุงุตูุชูุง ุชูุฑุงูุง ูุชุจุฏุฃ ุจุญุฑู ุงูุฃููุ", "ุฃูุจุงููุง", "ุจูุฏุงู"),
                "ุจุฏูู1": ("ูุง ุงุณู ูุธููุฉ ูู ุงููุฌุงู ุงูุทุจู ุชุจุฏุฃ ุจุญุฑู ุงูุฃูู ููุนูู ุตุงุญุจูุง ุนูู ุชุดุฎูุต ุงูุฃูุฑุงุถุ", "ุฃุฎุตุงุฆู", "ูุธุงุฆู"), 
                "ุจุฏูู2": ("ูุง ุงุณู ุญููุงู ูุนูุด ูู ุงูููุงู ูููุนุฑู ุจุญุฑูุชู ุงูุงูุฒูุงููุฉ ููุจุฏุฃ ุจุญุฑู ุงูุฃููุ", "ุฃุฎุทุจูุท", "ุญููุงูุงุช")
            },
            "ุจ": {
                "ุฑุฆูุณู": ("ูุง ุงุณู ูุธููุฉ ูุนูู ูููุง ุงูุดุฎุต ุนูู ุงูุนูุงูุฉ ุจุงููุจุงุชุงุช ูุงูุฒููุฑุ", "ุจุณุชุงูู", "ูุธุงุฆู"),
                "ุจุฏูู1": ("ูุง ุงุณู ุฏููุฉ ุขุณูููุฉ ุชุดุชูุฑ ุจุตูุงุนุฉ ุงููุณูุฌ ูุนุงุตูุชูุง ุฏูุงุ", "ุจูุบูุงุฏูุด", "ุจูุฏุงู"),
                "ุจุฏูู2": ("ูุง ุงุณู ุนูู ููุนูู ุจุฏุฑุงุณุฉ ุงูุณููู ูุงูุนููุ", "ุจููููุฌูุง ุงูุณููู", "ุนููู")
            },
            "ุช": {
                "ุฑุฆูุณู": ("ูุง ุงุณู ุฌูุงุฒ ููุณุชุฎุฏู ูููุงุณ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ููุจุฏุฃ ุจุญุฑู ุงูุชุงุกุ", "ุชุฑูููุชุฑ", "ุงุฎุชุฑุงุนุงุช"),
                "ุจุฏูู1": ("ูุง ุงุณู ุฏููุฉ ุนุฑุจูุฉ ุชุดุชูุฑ ุจุงูุตูุงุนุงุช ุงูุฌูุฏูุฉ ูุชุจุฏุฃ ุจุญุฑู ุงูุชุงุกุ", "ุชููุณ", "ุจูุฏุงู"),
                "ุจุฏูู2": ("ูุง ุงุณู ุญููุงู ุจุฑู ุตุบูุฑ ูุนูุด ูู ุงูุตุญุฑุงุก ููุจุฏุฃ ุจุญุฑู ุงูุชุงุกุ", "ุชูุณ", "ุญููุงูุงุช")
            },
            "ุซ": {
                "ุฑุฆูุณู": ("ูุง ุงุณู ุนูู ููุชู ุจุฏุฑุงุณุฉ ุงูุซูุงูุงุช ูุงููุฌุชูุนุงุช ุงููุฏููุฉ ููุจุฏุฃ ุจุญุฑู ุงูุซุงุกุ", "ุซูุงูุฉ ุงูุดุนูุจ", "ุซูุงูู"),
                "ุจุฏูู1": ("ูุง ุงููููุฉ ุงูุชู ุชูุณุชุฎุฏู ูู ุงููุบุฉ ุงูุนุฑุจูุฉ ููุตู ุงููุซุฑุฉ ุงูุดุฏูุฏุฉ ูุชุจุฏุฃ ุจุญุฑู ุงูุซุงุกุ", "ุซุฑุซุฑุฉ", "ูุบูู"),
                "ุจุฏูู2": ("ูุง ุงุณู ูุฏููุฉ ุณุนูุฏูุฉ ุชุดุชูุฑ ุจุงูุฒุฑุงุนุฉ ูุชูุน ูู ููุทูุฉ ุงููุตูู ูุชุจุฏุฃ ุจุญุฑู ุงูุซุงุกุ", "ุซุงุฏู", "ูุฏู ุณุนูุฏูุฉ")
            },
            "ุฌ": {
                "ุฑุฆูุณู": ("ูุง ุงุณู ุฏููุฉ ุชูุน ูู ุฃูุฑููุง ุงููุณุทู ูุชุจุฏุฃ ุจุญุฑู ุงูุฌููุ", "ุฌุงูุงููุง", "ุจูุฏุงู"),
                "ุจุฏูู1": ("ูู ูู ุงููุงุฆุฏ ุงููุณูู ุงูุฐู ูุงุฏ ุฌููุด ุงููุณูููู ูู ูุนุฑูุฉ ููุงููุฏ ููุจุฏุฃ ุงุณูู ุจุญุฑู ุงูุฌููุ", "ุฌุฑูุฑ ุจู ุนุจุฏุงููู", "ุชุงุฑูุฎ"),
                "ุจุฏูู2": ("ูุง ุงุณู ุดุงุนุฑ ุนุจุงุณู ูุนุฑูู ุจุงููุฎุฑ ูุงููุฌุงุก ููุจุฏุฃ ุงุณูู ุจุญุฑู ุงูุฌููุ", "ุฌุฑูุฑ", "ุฃุฏุจ")
            }
        }

        # ูุทุงุจูุฉ ุฃููุงุน ุงูุฃุณุฆูุฉ
        question_types = {
            "ุฑุฆูุณู": "main",
            "ุจุฏูู1": "alt1", 
            "ุจุฏูู2": "alt2"
        }

        # ุญุฐู ุงูุฃุณุฆูุฉ ุงููุฏููุฉ ููุญุฒูุฉ
        LettersGameQuestion.objects.filter(package=free_package).delete()
        self.stdout.write(
            self.style.WARNING('ุชู ุญุฐู ุงูุฃุณุฆูุฉ ุงููุฏููุฉ')
        )

        # ุฅุฏุฎุงู ุงูุฃุณุฆูุฉ ุงูุฌุฏูุฏุฉ
        questions_created = 0
        
        for ุญุฑู, ุงุณุฆูุฉ_ุงูุญุฑู in ุงุณุฆูุฉ.items():
            for ููุน_ุงูุณุคุงู, (ูุต_ุงูุณุคุงู, ุงูุงุฌุงุจุฉ, ุงูุชุตููู) in ุงุณุฆูุฉ_ุงูุญุฑู.items():
                LettersGameQuestion.objects.create(
                    package=free_package,
                    letter=ุญุฑู,
                    question_type=question_types[ููุน_ุงูุณุคุงู],
                    question=ูุต_ุงูุณุคุงู,
                    answer=ุงูุงุฌุงุจุฉ,
                    category=ุงูุชุตููู
                )
                questions_created += 1
                
                self.stdout.write(
                    f'โ ุชู ุฅุฏุฎุงู: {ุญุฑู} - {ููุน_ุงูุณุคุงู} - {ูุต_ุงูุณุคุงู[:30]}...'
                )

        self.stdout.write(
            self.style.SUCCESS(f'ุชู ุฅุฏุฎุงู {questions_created} ุณุคุงู ุจูุฌุงุญ!')
        )

        # ุฅูุดุงุก ุญุฒู ูุฏููุนุฉ (ูุงุฑุบุฉ ููุขู)
        for package_num in range(2, 6):  # ุญุฒู 2-5
            paid_package, created = GamePackage.objects.get_or_create(
                game_type='letters',
                package_number=package_num,
                defaults={
                    'is_free': False,
                    'price': 10.00,  # 10 ุฑูุงู ููุญุฒูุฉ
                    'is_active': True
                }
            )
            if created:
                self.stdout.write(
                    self.style.SUCCESS(f'ุชู ุฅูุดุงุก ุงูุญุฒูุฉ ุงููุฏููุนุฉ ุฑูู {package_num}')
                )

        self.stdout.write(
            self.style.SUCCESS('๐ ุชู ุงูุงูุชูุงุก ูู ุฅุนุฏุงุฏ ุงูุจูุงูุงุช!')
        )